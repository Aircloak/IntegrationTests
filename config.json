{
  "email_to": "everyone-dev@aircloak.com",
  "email_from": "everyone-dev@aircloak.com",
  "email_server": "localhost",
  "email_port": 25,
  "tests": {
    "games and players": [
      {
        "datasources": [
          "newcloak/newcloak-odbc-postgresql@airdb.mpi-sws.org",
          "newcloak/newcloak@acmysql.mpi-sws.org",
          "newcloak/newcloak-games-and-players@airdb.mpi-sws.org"
        ],
        "query": "SELECT winpoints, COUNT(firstname) FROM players JOIN games ON players.uid = games.player WHERE firstname = 'Ryker' GROUP BY winpoints ORDER BY winpoints",
        "timeout": 30,
        "expects": [[55, 2], [56, 3], [60, 4], [61, 4], [62, 3], [63, 7], [64, 3], [65, 2], [66, 2], [70, 2], ["*", 24]]
      },
      {
        "datasources": [
          "newcloak/newcloak-odbc-postgresql@airdb.mpi-sws.org",
          "newcloak/newcloak@acmysql.mpi-sws.org",
          "newcloak/newcloak-games-and-players@airdb.mpi-sws.org"
        ],
        "query": "SELECT SUM(winpoints) FROM players INNER JOIN games ON players.uid = games.player WHERE age > 0 and age < 18",
        "timeout": 30,
        "expects": [[52815]]
      },
      {
        "datasources": [
          "newcloak/newcloak-odbc-postgresql@airdb.mpi-sws.org",
          "newcloak/newcloak@acmysql.mpi-sws.org",
          "newcloak/newcloak-games-and-players@airdb.mpi-sws.org"
        ],
        "query": "SELECT AVG(count) FROM (SELECT player, count(*) AS count FROM games GROUP BY player) AS t",
        "timeout": 30,
        "expects": [[10.514]]
      },
      {
        "datasources": [
          "newcloak/newcloak-odbc-postgresql@airdb.mpi-sws.org",
          "newcloak/newcloak@acmysql.mpi-sws.org",
          "newcloak/newcloak-games-and-players@airdb.mpi-sws.org"
        ],
        "query": "SELECT firstname FROM players WHERE firstname = 'abc \\''~!@#{$1%^&1*(){}[]_+-=?/\\<>\b\",.:;\t 123'",
        "timeout": 30,
        "expects": []
      },
      {
        "datasources": [
          "newcloak/newcloak-odbc-postgresql@airdb.mpi-sws.org",
          "newcloak/newcloak@acmysql.mpi-sws.org",
          "newcloak/newcloak-games-and-players@airdb.mpi-sws.org"
        ],
        "query": "SELECT winpoints, COUNT(*) FROM players JOIN games ON players.uid = games.player GROUP BY winpoints HAVING COUNT(*) BETWEEN 100 AND 300 ORDER BY winpoints LIMIT 2",
        "timeout": 30,
        "expects": [[50, 200], [79, 228]]
      },
      {
        "datasources": [
          "newcloak/newcloak-odbc-postgresql@airdb.mpi-sws.org",
          "newcloak/newcloak@acmysql.mpi-sws.org",
          "newcloak/newcloak-games-and-players@airdb.mpi-sws.org"
        ],
        "query": "SELECT MEDIAN(level) FROM (SELECT uid, level FROM players ORDER BY level DESC LIMIT 25 OFFSET 5) AS t",
        "timeout": 30,
        "expects": [[10]]
      }
    ],
    "nyctaxi": [
      {
        "datasources": ["nyctaxi/nyctaxi@stage-airdb.mpi-sws.org"],
        "query": "SELECT COUNT(trip_time_in_secs), AVG(trip_time_in_secs), STDDEV(trip_time_in_secs) FROM trips WHERE passenger_count >= 8 and passenger_count < 10",
        "timeout": 30,
        "expects": [[37, 342.27, 524.434]]
      },
      {
        "datasources": ["nyctaxi/nyctaxi@stage-airdb.mpi-sws.org"],
        "query": "SELECT passenger_count AS pc, COUNT(*) FROM trips WHERE passenger_count IN (7,8,9,10) GROUP BY pc ORDER BY pc",
        "timeout": 30,
        "expects": [[7, 26], [8, 19], [9, 16]]
      },
      {
        "datasources": ["nyctaxi/nyctaxi@stage-airdb.mpi-sws.org"],
        "query": "SELECT COUNT(DISTINCT passenger_count) FROM trips WHERE trip_time_in_secs > 5000 and trip_time_in_secs < 10000",
        "timeout": 600,
        "expects": [[11]]
      },
      {
        "datasources": ["nyctaxi/nyctaxi@stage-airdb.mpi-sws.org"],
        "query": "SELECT COUNT(*) FROM trips WHERE trip_time_in_secs > 2500 and trip_time_in_secs < 5000 AND passenger_count <> 4",
        "timeout": 900,
        "expects": [[2721048]]
      },
      {
        "datasources": ["nyctaxi/nyctaxi@stage-airdb.mpi-sws.org"],
        "query": "SELECT MIN(passenger_count), MAX(passenger_count), MEDIAN(passenger_count), SUM(passenger_count) FROM trips WHERE trip_time_in_secs >= 0 and trip_time_in_secs < 50",
        "timeout": 900,
        "expects": [[0, 208, 1, 1343185]]
      }
    ],
    "medical database (dsproxy)": [
      {
        "datasources": ["dsproxy/med@stage_ds_proxy"],
        "query": "SELECT COUNT(status) FROM pt_mail",
        "timeout": 30,
        "expects": [[3577]]
      },
      {
        "datasources": ["dsproxy/med@stage_ds_proxy"],
        "query": "SELECT age, count(*) FROM (SELECT datediff(year, date_of_birth, getdate()) AS age FROM patients WHERE firstname = 'Ana') AS t GROUP BY age ORDER BY age ASC",
        "timeout": 30,
        "expects": [["*", 25]]
      },
      {
        "datasources": ["dsproxy/med@stage_ds_proxy"],
        "query": "SELECT diagnosis, count(*) FROM (SELECT d.patient_id, k.keyword as diagnosis FROM pt_diagnoses d JOIN diagnosis_keywords k ON d.code = k.code WHERE k.keyword = 'cancer' GROUP BY d.patient_id, k.keyword) t GROUP BY diagnosis",
        "timeout": 30,
        "expects": [["cancer", 254]]
      }
    ],
    "medical database": [
      {
        "datasources": ["aircloak1/Kia_Clinic@srv-51-42.mpi-sws.org"],
        "query": "SELECT COUNT(*) FROM patients",
        "timeout": 30,
        "expects": [[11253]]
      },
      {
        "datasources": ["aircloak1/Kia_Clinic@srv-51-42.mpi-sws.org"],
        "query": "SELECT firstname FROM patients WHERE firstname = 'abc \\''~!@#{$1%^&1*(){}[]_+-=?/\\<>\b\",.:;\t 123'",
        "timeout": 30,
        "expects": []
      }
    ]
  },
  "cloaks": [
    {
      "url": "nightly-air.aircloak.com",
      "token": "SFMyNTY.g3QAAAACZAAEZGF0YW0AAAAkNGFiMDc5YTctYjM1ZS00NDgyLWFlZjAtNzRhMmY2ZTM3MmZlZAAGc2lnbmVkbgYAab6qmVcB.T_j5M5Kix3k2wLo8qefhC9EcqQ0UEddkjbpOpvD5zY0",
      "tests": ["games and players", "nyctaxi", "medical database (dsproxy)", "medical database"]
    }
  ]
}
